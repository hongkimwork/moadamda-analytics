# Git ê¸°ë°˜ ë°°í¬ ê·œì¹™

## ğŸ“‹ ê°œìš”

moadamda-analytics í”„ë¡œì íŠ¸ëŠ” **Git ê¸°ë°˜ ë°°í¬ ë°©ì‹**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
ë¡œì»¬ì—ì„œ ì½”ë“œ ìˆ˜ì • â†’ GitHub ì—…ë¡œë“œ â†’ ì„œë²„ì—ì„œ pull â†’ Docker ì¬ë¹Œë“œ ìˆœì„œë¡œ ì§„í–‰í•©ë‹ˆë‹¤.

---

## ğŸ”— Git ì €ì¥ì†Œ

- **GitHub URL**: https://github.com/hongkimwork/moadamda-analytics
- **ë¸Œëœì¹˜**: main
- **ì ‘ê·¼ ê¶Œí•œ**: Private ì €ì¥ì†Œ

---

## ğŸš€ ë°°í¬ í”„ë¡œì„¸ìŠ¤ (5ë‹¨ê³„)

### 1ï¸âƒ£ ë¡œì»¬ì—ì„œ ì½”ë“œ ìˆ˜ì • ë° GitHub ì—…ë¡œë“œ

```bash
# Windows ë¡œì»¬ PC (C:\analysis\moadamda-analytics)
cd C:\analysis\moadamda-analytics

# ë³€ê²½ì‚¬í•­ í™•ì¸
git status

# ì»¤ë°‹
git add .
git commit -m "ë³€ê²½ ë‚´ìš© ì„¤ëª…"

# GitHubì— push
git push origin main
```

### 2ï¸âƒ£ ì„œë²„ SSH ì ‘ì†

```bash
# CMD ë˜ëŠ” PowerShell
ssh root@211.188.53.220
# ë¹„ë°€ë²ˆí˜¸: L9=FEcbJN!Yd
```

### 3ï¸âƒ£ ì„œë²„ì—ì„œ ìµœì‹  ì½”ë“œ ë°›ê¸°

```bash
cd /root/moadamda-analytics
git pull origin main
```

### 4ï¸âƒ£ Docker ì¬ë¹Œë“œ ë° ì¬ì‹œì‘

```bash
# ì½”ë“œ ë³€ê²½ ì‹œ ë°˜ë“œì‹œ --build ì˜µì…˜ ì‚¬ìš©!
docker-compose -f docker-compose.prod.yml up -d --build
```

### 5ï¸âƒ£ ë°°í¬ í™•ì¸

```bash
# ë¡œê·¸ í™•ì¸
docker-compose -f docker-compose.prod.yml logs backend --tail 50

# ì‹¤ì‹œê°„ ë¡œê·¸
docker-compose -f docker-compose.prod.yml logs backend -f
```

---

## âš ï¸ ì¤‘ìš” ì‚¬í•­

### 1. ì½”ë“œ ë³€ê²½ ì‹œ ë°˜ë“œì‹œ `--build` ì‚¬ìš©

Docker ì´ë¯¸ì§€ ì•ˆì— ì½”ë“œê°€ í¬í•¨ë˜ë¯€ë¡œ, ì½”ë“œ ë³€ê²½ ì‹œ ì´ë¯¸ì§€ë¥¼ ë‹¤ì‹œ ë¹Œë“œí•´ì•¼ í•©ë‹ˆë‹¤.

- âŒ **ì˜ëª»ëœ ë°©ë²•**: `docker-compose restart backend`
  - ì»¨í…Œì´ë„ˆë§Œ ì¬ì‹œì‘, ì´ë¯¸ì§€ëŠ” ì¬ë¹Œë“œ ì•ˆ ë¨
  - ì½”ë“œ ë³€ê²½ì‚¬í•­ì´ ë°˜ì˜ë˜ì§€ ì•ŠìŒ!

- âœ… **ì˜¬ë°”ë¥¸ ë°©ë²•**: `docker-compose up -d --build`
  - ì´ë¯¸ì§€ ì¬ë¹Œë“œ â†’ ìƒˆ ì»¨í…Œì´ë„ˆ ìƒì„±
  - ì½”ë“œ ë³€ê²½ì‚¬í•­ì´ ì •ìƒ ë°˜ì˜ë¨

### 2. íŒŒì¼ì„ ì§ì ‘ ìˆ˜ì •í•˜ì§€ ë§ ê²ƒ

ì„œë²„ì—ì„œ íŒŒì¼ì„ ì§ì ‘ ìˆ˜ì •í•˜ë©´ Git ì´ë ¥ê³¼ ë¶ˆì¼ì¹˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.

- âŒ **í•˜ì§€ ë§ ê²ƒ**: 
  - ì„œë²„ì—ì„œ vim/nanoë¡œ íŒŒì¼ ì§ì ‘ ìˆ˜ì •
  - ì„œë²„ì—ì„œ cat > íŒŒì¼ ìƒì„±

- âœ… **ì˜¬ë°”ë¥¸ ë°©ë²•**:
  - ë¡œì»¬ì—ì„œ ìˆ˜ì • â†’ Git push â†’ ì„œë²„ì—ì„œ pull

### 3. .env íŒŒì¼ì€ ì˜ˆì™¸

`.env` íŒŒì¼ì€ Gitì— í¬í•¨ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì„œë²„ì—ì„œ ìˆ˜ë™ ê´€ë¦¬í•©ë‹ˆë‹¤.

- ìœ„ì¹˜: `/root/moadamda-analytics/backend/.env`
- `.env` ìˆ˜ì • í›„ì—ë„ Docker ì¬ì‹œì‘ í•„ìš”:
  ```bash
  docker-compose -f docker-compose.prod.yml restart backend
  ```

---

## ğŸ”„ ë¡¤ë°± ë°©ë²•

### Git ì»¤ë°‹ ë˜ëŒë¦¬ê¸°

```bash
# ì„œë²„ì—ì„œ
cd /root/moadamda-analytics

# ì´ì „ ì»¤ë°‹ìœ¼ë¡œ ë˜ëŒë¦¬ê¸°
git log --oneline  # ì»¤ë°‹ í•´ì‹œ í™•ì¸
git checkout <commit-hash>

# Docker ì¬ì‹œì‘
docker-compose -f docker-compose.prod.yml up -d --build
```

### Git íƒœê·¸ë¡œ ë¡¤ë°±

```bash
# v042ë¡œ ë¡¤ë°±
git checkout v042
docker-compose -f docker-compose.prod.yml up -d --build

# ìµœì‹  ë²„ì „ìœ¼ë¡œ ë³µê·€
git checkout main
docker-compose -f docker-compose.prod.yml up -d --build
```

---

## ğŸ“š Git ê¸°ë³¸ ëª…ë ¹ì–´

### ìì£¼ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´

```bash
# í˜„ì¬ ìƒíƒœ í™•ì¸
git status

# ë³€ê²½ ì´ë ¥ í™•ì¸
git log --oneline --graph -10

# ì›ê²© ì €ì¥ì†Œ í™•ì¸
git remote -v

# ìµœì‹  ì½”ë“œ ë°›ê¸°
git pull origin main

# ë³€ê²½ì‚¬í•­ ì—…ë¡œë“œ
git add .
git commit -m "ë©”ì‹œì§€"
git push origin main

# íŠ¹ì • íŒŒì¼ë§Œ ì»¤ë°‹
git add íŒŒì¼ëª…
git commit -m "ë©”ì‹œì§€"
git push origin main
```

### ë¬¸ì œ í•´ê²°

```bash
# ë¡œì»¬ ë³€ê²½ì‚¬í•­ ë²„ë¦¬ê¸° (ì£¼ì˜!)
git reset --hard HEAD

# ì¶©ëŒ ë°œìƒ ì‹œ ì„œë²„ ì½”ë“œ ê°•ì œ ì´ˆê¸°í™”
git fetch origin
git reset --hard origin/main

# Git ìƒíƒœ í™•ì¸
git status
git diff
```

---

## ğŸ¯ AI ê°œë°œì ì§€ì¹¨

AIê°€ ì½”ë“œë¥¼ ìˆ˜ì •í•  ë•ŒëŠ” ë‹¤ìŒ ìˆœì„œë¥¼ ë”°ë¦…ë‹ˆë‹¤:

1. **ë¡œì»¬ì—ì„œ íŒŒì¼ ìˆ˜ì •** (search_replace, write ë„êµ¬ ì‚¬ìš©)
2. **Git ì»¤ë°‹ ë° push** (run_terminal_cmd ë„êµ¬ ì‚¬ìš©)
3. **ì‚¬ìš©ìì—ê²Œ ì„œë²„ ë°°í¬ ì•ˆë‚´**:
   - "ì„œë²„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì£¼ì„¸ìš”"
   - git pull ëª…ë ¹ì–´ ì œê³µ
   - docker-compose up -d --build ëª…ë ¹ì–´ ì œê³µ
4. **ë°°í¬ í™•ì¸ ë¡œê·¸ ìš”ì²­**

### AIê°€ ì§ì ‘ í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ

- âŒ ì„œë²„ íŒŒì¼ ì§ì ‘ ìˆ˜ì •
- âŒ ì„œë²„ì—ì„œ cat > íŒŒì¼ ìƒì„±
- âŒ SSHë¡œ ì„œë²„ ì ‘ì†í•´ì„œ ì½”ë“œ ìˆ˜ì •

### AIê°€ í•´ì•¼ í•  ê²ƒ

- âœ… ë¡œì»¬ íŒŒì¼ ìˆ˜ì •
- âœ… Git ì»¤ë°‹ ë° push
- âœ… ì‚¬ìš©ìì—ê²Œ ë°°í¬ ê°€ì´ë“œ ì œê³µ

---

## ğŸ“ ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

ë°°í¬ ì „ í™•ì¸ì‚¬í•­:

- [ ] ë¡œì»¬ì—ì„œ ì½”ë“œ ìˆ˜ì • ì™„ë£Œ
- [ ] `git status`ë¡œ ë³€ê²½ì‚¬í•­ í™•ì¸
- [ ] `git add .` ì‹¤í–‰
- [ ] `git commit -m "ì˜ë¯¸ìˆëŠ” ë©”ì‹œì§€"` ì‹¤í–‰
- [ ] `git push origin main` ì‹¤í–‰ (ì„±ê³µ í™•ì¸)
- [ ] ì„œë²„ SSH ì ‘ì†
- [ ] `cd /root/moadamda-analytics` ì´ë™
- [ ] `git pull origin main` ì‹¤í–‰ (Fast-forward í™•ì¸)
- [ ] `docker-compose -f docker-compose.prod.yml up -d --build` ì‹¤í–‰
- [ ] ë¡œê·¸ í™•ì¸ìœ¼ë¡œ ì •ìƒ ì‘ë™ í™•ì¸

---

## ğŸ’¡ íŒ

### ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ (ì„ íƒì‚¬í•­)

ì„œë²„ì— ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ë©´ ë” í¸ë¦¬í•©ë‹ˆë‹¤:

```bash
# ì„œë²„ì—ì„œ ì‹¤í–‰ (ìµœì´ˆ 1íšŒ)
cat > /root/deploy.sh << 'EOF'
#!/bin/bash
echo "ğŸš€ Starting deployment..."
cd /root/moadamda-analytics
git pull origin main
docker-compose -f docker-compose.prod.yml up -d --build
echo "âœ… Deployment completed!"
docker-compose -f docker-compose.prod.yml logs backend --tail 20
EOF

chmod +x /root/deploy.sh
```

**ì´í›„ ë°°í¬ëŠ” í•œ ì¤„ë¡œ:**
```bash
/root/deploy.sh
```

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-04

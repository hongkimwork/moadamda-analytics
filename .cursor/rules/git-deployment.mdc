# Git ê¸°ë°˜ ë°°í¬ ê·œì¹™

## ğŸ“‹ ê°œìš”

moadamda-analytics í”„ë¡œì íŠ¸ëŠ” **Git ê¸°ë°˜ ë°°í¬ ë°©ì‹**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
ë¡œì»¬ì—ì„œ ì½”ë“œ ìˆ˜ì • â†’ GitHub ì—…ë¡œë“œ â†’ ì„œë²„ì—ì„œ pull â†’ Docker ì¬ë¹Œë“œ ìˆœì„œë¡œ ì§„í–‰í•©ë‹ˆë‹¤.

---

## ğŸ”— Git ì €ì¥ì†Œ

- **GitHub URL**: https://github.com/hongkimwork/moadamda-analytics
- **ë¸Œëœì¹˜**: main
- **ì ‘ê·¼ ê¶Œí•œ**: Private ì €ì¥ì†Œ

---

## ğŸš€ ë°°í¬ í”„ë¡œì„¸ìŠ¤

### ê¸°ë³¸ ë°°í¬ (ë°±ì—”ë“œ ë³€ê²½ ì‹œ)

### 1ï¸âƒ£ ë¡œì»¬ì—ì„œ ì½”ë“œ ìˆ˜ì • ë° GitHub ì—…ë¡œë“œ

```bash
# Windows ë¡œì»¬ PC (C:\analysis\moadamda-analytics)
cd C:\analysis\moadamda-analytics

# ë³€ê²½ì‚¬í•­ í™•ì¸
git status

# ì»¤ë°‹
git add .
git commit -m "ë³€ê²½ ë‚´ìš© ì„¤ëª…"

# GitHubì— push
git push origin main
```

### 2ï¸âƒ£ ì„œë²„ SSH ì ‘ì†

```bash
# CMD ë˜ëŠ” PowerShell
ssh root@211.188.53.220
# ë¹„ë°€ë²ˆí˜¸: L9=FEcbJN!Yd
```

### 3ï¸âƒ£ ì„œë²„ì—ì„œ ìµœì‹  ì½”ë“œ ë°›ê¸°

```bash
cd /root/moadamda-analytics
git pull origin main
```

### 4ï¸âƒ£ Docker ì¬ë¹Œë“œ ë° ì¬ì‹œì‘

```bash
# ì½”ë“œ ë³€ê²½ ì‹œ ë°˜ë“œì‹œ --build ì˜µì…˜ ì‚¬ìš©!
docker-compose -f docker-compose.prod.yml up -d --build
```

### 5ï¸âƒ£ ë°°í¬ í™•ì¸

```bash
# ë¡œê·¸ í™•ì¸
docker-compose -f docker-compose.prod.yml logs backend --tail 50

# ì‹¤ì‹œê°„ ë¡œê·¸
docker-compose -f docker-compose.prod.yml logs backend -f
```

---

## ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ ë³€ê²½ ì‹œ ì¶”ê°€ ë‹¨ê³„ (ì¤‘ìš”!)

**âš ï¸ í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ë³€ê²½ ì‹œ ë°˜ë“œì‹œ ì¶”ê°€ ë¹Œë“œ í•„ìš”!**

í”„ë¡ íŠ¸ì—”ë“œëŠ” **ë¹Œë“œëœ ì •ì  íŒŒì¼(dist)**ì„ ì‚¬ìš©í•˜ë¯€ë¡œ, ì½”ë“œ ë³€ê²½ í›„ ë°˜ë“œì‹œ ì¬ë¹Œë“œí•´ì•¼ í•©ë‹ˆë‹¤.

### í”„ë¡ íŠ¸ì—”ë“œ ë³€ê²½ì´ í¬í•¨ëœ ê²½ìš° (frontend/src/ ìˆ˜ì •)

```bash
# 1-3ë‹¨ê³„: ìœ„ì˜ ê¸°ë³¸ ë°°í¬ ê³¼ì • ë™ì¼í•˜ê²Œ ì§„í–‰

# 4ë‹¨ê³„: Docker ì¬ë¹Œë“œ
cd /root/moadamda-analytics
docker-compose -f docker-compose.prod.yml up -d --build

# 5ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ (â˜… ì¶”ê°€ ë‹¨ê³„ â˜…)
cd /root/moadamda-analytics/frontend
npm run build

# 6ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
cd /root/moadamda-analytics
docker-compose -f docker-compose.prod.yml restart frontend

# 7ë‹¨ê³„: í™•ì¸
docker-compose -f docker-compose.prod.yml logs frontend --tail 20
```

### ë°°í¬ ì™„ë£Œ í›„ ë¸Œë¼ìš°ì € í™•ì¸

- ë¸Œë¼ìš°ì €ì—ì„œ **Ctrl + Shift + R** (ê°•ë ¥ ìƒˆë¡œê³ ì¹¨) ì‹¤í–‰
- ìºì‹œë¥¼ ì§€ìš°ê³  ìƒˆë¡œìš´ íŒŒì¼ ë¡œë“œ

---

## ğŸ“¦ ë³€ê²½ ìœ í˜•ë³„ ë°°í¬ ê°€ì´ë“œ

| ë³€ê²½ íŒŒì¼ ìœ„ì¹˜ | í•„ìš”í•œ ë°°í¬ ë‹¨ê³„ |
|---------------|----------------|
| `backend/src/**` | Docker ì¬ë¹Œë“œë§Œ (`up -d --build`) |
| `frontend/src/**` | Docker ì¬ë¹Œë“œ + **npm run build** + frontend ì¬ì‹œì‘ |
| `tracker/src/**` | ë¹Œë“œ í›„ ì„œë²„ ì—…ë¡œë“œ (ë³„ë„ í”„ë¡œì„¸ìŠ¤) |
| `.env` íŒŒì¼ | Docker ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ (`restart`) |
| `docker-compose.prod.yml` | Docker ì¬ë¹Œë“œ (`up -d --build`) |

---

## âš ï¸ ì¤‘ìš” ì‚¬í•­

### 1. ì½”ë“œ ë³€ê²½ ì‹œ ë°˜ë“œì‹œ `--build` ì‚¬ìš©

Docker ì´ë¯¸ì§€ ì•ˆì— ì½”ë“œê°€ í¬í•¨ë˜ë¯€ë¡œ, ì½”ë“œ ë³€ê²½ ì‹œ ì´ë¯¸ì§€ë¥¼ ë‹¤ì‹œ ë¹Œë“œí•´ì•¼ í•©ë‹ˆë‹¤.

- âŒ **ì˜ëª»ëœ ë°©ë²•**: `docker-compose restart backend`
  - ì»¨í…Œì´ë„ˆë§Œ ì¬ì‹œì‘, ì´ë¯¸ì§€ëŠ” ì¬ë¹Œë“œ ì•ˆ ë¨
  - ì½”ë“œ ë³€ê²½ì‚¬í•­ì´ ë°˜ì˜ë˜ì§€ ì•ŠìŒ!

- âœ… **ì˜¬ë°”ë¥¸ ë°©ë²•**: `docker-compose up -d --build`
  - ì´ë¯¸ì§€ ì¬ë¹Œë“œ â†’ ìƒˆ ì»¨í…Œì´ë„ˆ ìƒì„±
  - ì½”ë“œ ë³€ê²½ì‚¬í•­ì´ ì •ìƒ ë°˜ì˜ë¨

### 2. íŒŒì¼ì„ ì§ì ‘ ìˆ˜ì •í•˜ì§€ ë§ ê²ƒ

ì„œë²„ì—ì„œ íŒŒì¼ì„ ì§ì ‘ ìˆ˜ì •í•˜ë©´ Git ì´ë ¥ê³¼ ë¶ˆì¼ì¹˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.

- âŒ **í•˜ì§€ ë§ ê²ƒ**: 
  - ì„œë²„ì—ì„œ vim/nanoë¡œ íŒŒì¼ ì§ì ‘ ìˆ˜ì •
  - ì„œë²„ì—ì„œ cat > íŒŒì¼ ìƒì„±

- âœ… **ì˜¬ë°”ë¥¸ ë°©ë²•**:
  - ë¡œì»¬ì—ì„œ ìˆ˜ì • â†’ Git push â†’ ì„œë²„ì—ì„œ pull

### 3. .env íŒŒì¼ì€ ì˜ˆì™¸

`.env` íŒŒì¼ì€ Gitì— í¬í•¨ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì„œë²„ì—ì„œ ìˆ˜ë™ ê´€ë¦¬í•©ë‹ˆë‹¤.

- ìœ„ì¹˜: `/root/moadamda-analytics/backend/.env`
- `.env` ìˆ˜ì • í›„ì—ë„ Docker ì¬ì‹œì‘ í•„ìš”:
  ```bash
  docker-compose -f docker-compose.prod.yml restart backend
  ```

---

## ğŸ”„ ë¡¤ë°± ë°©ë²•

### Git ì»¤ë°‹ ë˜ëŒë¦¬ê¸°

```bash
# ì„œë²„ì—ì„œ
cd /root/moadamda-analytics

# ì´ì „ ì»¤ë°‹ìœ¼ë¡œ ë˜ëŒë¦¬ê¸°
git log --oneline  # ì»¤ë°‹ í•´ì‹œ í™•ì¸
git checkout <commit-hash>

# Docker ì¬ì‹œì‘
docker-compose -f docker-compose.prod.yml up -d --build
```

### Git íƒœê·¸ë¡œ ë¡¤ë°±

```bash
# v042ë¡œ ë¡¤ë°±
git checkout v042
docker-compose -f docker-compose.prod.yml up -d --build

# ìµœì‹  ë²„ì „ìœ¼ë¡œ ë³µê·€
git checkout main
docker-compose -f docker-compose.prod.yml up -d --build
```

---

## ğŸ“š Git ê¸°ë³¸ ëª…ë ¹ì–´

### ìì£¼ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´

```bash
# í˜„ì¬ ìƒíƒœ í™•ì¸
git status

# ë³€ê²½ ì´ë ¥ í™•ì¸
git log --oneline --graph -10

# ì›ê²© ì €ì¥ì†Œ í™•ì¸
git remote -v

# ìµœì‹  ì½”ë“œ ë°›ê¸°
git pull origin main

# ë³€ê²½ì‚¬í•­ ì—…ë¡œë“œ
git add .
git commit -m "ë©”ì‹œì§€"
git push origin main

# íŠ¹ì • íŒŒì¼ë§Œ ì»¤ë°‹
git add íŒŒì¼ëª…
git commit -m "ë©”ì‹œì§€"
git push origin main
```

### ë¬¸ì œ í•´ê²°

```bash
# ë¡œì»¬ ë³€ê²½ì‚¬í•­ ë²„ë¦¬ê¸° (ì£¼ì˜!)
git reset --hard HEAD

# ì¶©ëŒ ë°œìƒ ì‹œ ì„œë²„ ì½”ë“œ ê°•ì œ ì´ˆê¸°í™”
git fetch origin
git reset --hard origin/main

# Git ìƒíƒœ í™•ì¸
git status
git diff
```

---

## ğŸ¯ AI ê°œë°œì ì§€ì¹¨

AIê°€ ì½”ë“œë¥¼ ìˆ˜ì •í•  ë•ŒëŠ” ë‹¤ìŒ ìˆœì„œë¥¼ ë”°ë¦…ë‹ˆë‹¤:

### 1. íŒŒì¼ ìˆ˜ì • ë° Git ì‘ì—…

1. **ë¡œì»¬ì—ì„œ íŒŒì¼ ìˆ˜ì •** (search_replace, write ë„êµ¬ ì‚¬ìš©)
2. **Git ì»¤ë°‹ ë° push** (run_terminal_cmd ë„êµ¬ ì‚¬ìš©)

### 2. ì‚¬ìš©ìì—ê²Œ ë°°í¬ ì•ˆë‚´ (ë³€ê²½ ìœ í˜• êµ¬ë¶„!)

#### ë°±ì—”ë“œë§Œ ë³€ê²½í•œ ê²½ìš° (backend/src/**)

```bash
ssh root@211.188.53.220
cd /root/moadamda-analytics
git pull origin main
docker-compose -f docker-compose.prod.yml up -d --build
docker-compose -f docker-compose.prod.yml logs backend --tail 50
```

#### í”„ë¡ íŠ¸ì—”ë“œ ë³€ê²½ì´ í¬í•¨ëœ ê²½ìš° (frontend/src/**)

```bash
ssh root@211.188.53.220
cd /root/moadamda-analytics
git pull origin main
docker-compose -f docker-compose.prod.yml up -d --build

# â˜… í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ì¶”ê°€ (í•„ìˆ˜!) â˜…
cd /root/moadamda-analytics/frontend
npm run build
cd /root/moadamda-analytics
docker-compose -f docker-compose.prod.yml restart frontend

# í™•ì¸
docker-compose -f docker-compose.prod.yml logs frontend --tail 20
```

**ì¤‘ìš”:** í”„ë¡ íŠ¸ì—”ë“œ ë³€ê²½ ì‹œ ë°˜ë“œì‹œ "ë¸Œë¼ìš°ì €ì—ì„œ Ctrl+Shift+Rë¡œ ê°•ë ¥ ìƒˆë¡œê³ ì¹¨ í•´ì£¼ì„¸ìš”"ë¼ê³  ì•ˆë‚´í•  ê²ƒ!

### AIê°€ ì§ì ‘ í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ

- âŒ ì„œë²„ íŒŒì¼ ì§ì ‘ ìˆ˜ì •
- âŒ ì„œë²„ì—ì„œ cat > íŒŒì¼ ìƒì„±
- âŒ SSHë¡œ ì„œë²„ ì ‘ì†í•´ì„œ ì½”ë“œ ìˆ˜ì •
- âŒ í”„ë¡ íŠ¸ì—”ë“œ ë³€ê²½ ì‹œ npm build ë‹¨ê³„ ëˆ„ë½

### AIê°€ í•´ì•¼ í•  ê²ƒ

- âœ… ë¡œì»¬ íŒŒì¼ ìˆ˜ì •
- âœ… Git ì»¤ë°‹ ë° push
- âœ… ì‚¬ìš©ìì—ê²Œ **ë³€ê²½ ìœ í˜•ì— ë§ëŠ”** ë°°í¬ ê°€ì´ë“œ ì œê³µ
- âœ… í”„ë¡ íŠ¸ì—”ë“œ ë³€ê²½ ì‹œ ë¹Œë“œ ë‹¨ê³„ ëª…ì‹œ
- âœ… ë¸Œë¼ìš°ì € ìºì‹œ ìƒˆë¡œê³ ì¹¨ ì•ˆë‚´

---

## ğŸ“ ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°±ì—”ë“œ ë³€ê²½ ì‹œ

- [ ] ë¡œì»¬ì—ì„œ ì½”ë“œ ìˆ˜ì • ì™„ë£Œ
- [ ] `git status`ë¡œ ë³€ê²½ì‚¬í•­ í™•ì¸
- [ ] `git add .` ì‹¤í–‰
- [ ] `git commit -m "ì˜ë¯¸ìˆëŠ” ë©”ì‹œì§€"` ì‹¤í–‰
- [ ] `git push origin main` ì‹¤í–‰ (ì„±ê³µ í™•ì¸)
- [ ] ì„œë²„ SSH ì ‘ì†
- [ ] `cd /root/moadamda-analytics` ì´ë™
- [ ] `git pull origin main` ì‹¤í–‰ (Fast-forward í™•ì¸)
- [ ] `docker-compose -f docker-compose.prod.yml up -d --build` ì‹¤í–‰
- [ ] ë¡œê·¸ í™•ì¸ìœ¼ë¡œ ì •ìƒ ì‘ë™ í™•ì¸

### í”„ë¡ íŠ¸ì—”ë“œ ë³€ê²½ ì‹œ (â˜… ì¶”ê°€ ë‹¨ê³„ í•„ìˆ˜ â˜…)

- [ ] ë¡œì»¬ì—ì„œ ì½”ë“œ ìˆ˜ì • ì™„ë£Œ
- [ ] `git status`ë¡œ ë³€ê²½ì‚¬í•­ í™•ì¸
- [ ] `git add .` ì‹¤í–‰
- [ ] `git commit -m "ì˜ë¯¸ìˆëŠ” ë©”ì‹œì§€"` ì‹¤í–‰
- [ ] `git push origin main` ì‹¤í–‰ (ì„±ê³µ í™•ì¸)
- [ ] ì„œë²„ SSH ì ‘ì†
- [ ] `cd /root/moadamda-analytics` ì´ë™
- [ ] `git pull origin main` ì‹¤í–‰ (Fast-forward í™•ì¸)
- [ ] `docker-compose -f docker-compose.prod.yml up -d --build` ì‹¤í–‰
- [ ] **`cd frontend && npm run build` ì‹¤í–‰** â† í•„ìˆ˜!
- [ ] `cd .. && docker-compose -f docker-compose.prod.yml restart frontend` ì‹¤í–‰
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ë¡œê·¸ í™•ì¸
- [ ] ë¸Œë¼ìš°ì €ì—ì„œ Ctrl+Shift+Rë¡œ ê°•ë ¥ ìƒˆë¡œê³ ì¹¨
- [ ] ë³€ê²½ì‚¬í•­ ë°˜ì˜ í™•ì¸

---

## ğŸ’¡ íŒ

### ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ (ì„ íƒì‚¬í•­)

ì„œë²„ì— ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ë©´ ë” í¸ë¦¬í•©ë‹ˆë‹¤:

```bash
# ì„œë²„ì—ì„œ ì‹¤í–‰ (ìµœì´ˆ 1íšŒ)
cat > /root/deploy.sh << 'EOF'
#!/bin/bash
echo "ğŸš€ Starting deployment..."
cd /root/moadamda-analytics
git pull origin main
docker-compose -f docker-compose.prod.yml up -d --build
echo "âœ… Deployment completed!"
docker-compose -f docker-compose.prod.yml logs backend --tail 20
EOF

chmod +x /root/deploy.sh
```

**ì´í›„ ë°°í¬ëŠ” í•œ ì¤„ë¡œ:**
```bash
/root/deploy.sh
```

---

---

## â— ìì£¼í•˜ëŠ” ì‹¤ìˆ˜

### 1. í”„ë¡ íŠ¸ì—”ë“œ ë³€ê²½ í›„ npm build ëˆ„ë½

**ì¦ìƒ:** 
- ì½”ë“œëŠ” ë³€ê²½í–ˆëŠ”ë° ë¸Œë¼ìš°ì €ì—ì„œ ë³€ê²½ì‚¬í•­ì´ ì•ˆ ë³´ì„
- Docker ë¡œê·¸ëŠ” ì •ìƒì¸ë° UIëŠ” ê·¸ëŒ€ë¡œ

**ì›ì¸:** 
- í”„ë¡ íŠ¸ì—”ë“œëŠ” ë¹Œë“œëœ ì •ì  íŒŒì¼(dist)ì„ ì‚¬ìš©
- Docker ì¬ë¹Œë“œë§Œìœ¼ë¡œëŠ” dist í´ë”ê°€ ì—…ë°ì´íŠ¸ ì•ˆ ë¨

**í•´ê²°:**
```bash
cd /root/moadamda-analytics/frontend
npm run build
cd ..
docker-compose -f docker-compose.prod.yml restart frontend
```

### 2. ë¸Œë¼ìš°ì € ìºì‹œ ë¬¸ì œ

**ì¦ìƒ:** 
- ì„œë²„ì—ëŠ” ìƒˆ íŒŒì¼ì´ ë°°í¬ë˜ì—ˆëŠ”ë° ë¸Œë¼ìš°ì €ëŠ” êµ¬ë²„ì „ í‘œì‹œ

**í•´ê²°:**
- **Ctrl + Shift + R** (Chrome, Edge)
- **Cmd + Shift + R** (Mac)
- ë˜ëŠ” ê°œë°œìë„êµ¬ â†’ Network íƒ­ â†’ Disable cache ì²´í¬

### 3. Docker ìºì‹œ ë¬¸ì œ

**ì¦ìƒ:** 
- `--build` ì˜µì…˜ì„ ì‚¬ìš©í–ˆëŠ”ë°ë„ ë³€ê²½ì‚¬í•­ ë¯¸ë°˜ì˜

**í•´ê²°:**
```bash
# ìºì‹œ ì—†ì´ ì™„ì „íˆ ìƒˆë¡œ ë¹Œë“œ
docker-compose -f docker-compose.prod.yml build --no-cache backend
docker-compose -f docker-compose.prod.yml up -d
```

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-05

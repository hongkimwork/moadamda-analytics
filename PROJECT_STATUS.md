# ğŸ¯ Moadamda Analytics - í”„ë¡œì íŠ¸ í˜„í™©

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-13

---

## ğŸ“ í˜„ì¬ ìƒíƒœ

- **ì‹œìŠ¤í…œ ë²„ì „**: v047 (í˜ì´ì§€ë§¤í•‘ ë³µí•© ì¡°ê±´ ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ)
- **Tracker ë²„ì „**: tracker-v042.js
- **ë°°í¬ í™˜ê²½**: Supabase (DB) + Vercel (ë°°í¬) ì „í™˜ ì˜ˆì • âš ï¸
- **ê°œë°œ í™˜ê²½**: macOS + Docker
- **ìƒíƒœ**: ë„¤ì´ë²„ í´ë¼ìš°ë“œ í•´ì§€, ê¸°ì¡´ ë°ì´í„° ì—†ìŒ (ìƒˆë¡œ ì‹œì‘)

---

## ğŸ“ ìµœê·¼ ì‘ì—… ë¡œê·¸ (ìµœì‹  15ê°œ)

| ë‚ ì§œ | ì‘ì—… ë‚´ìš© | ìˆ˜ì • íŒŒì¼ |
|------|---------|----------|
| 2025-11-13 | DB êµ¬ì¡° ë¬¸ì„œ ìƒì„± | database-structure.md |
| 2025-11-13 | ë³µí•© URL Badge+Popover í‘œì‹œ | PageMapping.jsx |
| 2025-11-13 | ì•¡ì…˜ ì»¬ëŸ¼ ë“œë¡­ë‹¤ìš´ ê°„ì†Œí™” | PageMapping.jsx |
| 2025-11-13 | URL ì¹´ë“œ ë°°ê²½ íšŒìƒ‰/ë‚´ë¶€ í°ìƒ‰ | PageMapping.jsx |
| 2025-11-13 | URL ëª¨ë‹¬ ìƒ‰ìƒ í†µì¼ (íšŒìƒ‰ íŒ”ë ˆíŠ¸) | PageMapping.jsx |
| 2025-11-13 | URL ëª¨ë‹¬ UI/UX ê°œì„  (íˆ´íŒ/ê³„ì¸µ) | PageMapping.jsx |
| 2025-11-13 | í•„í„° ë“œë¡­ë‹¤ìš´ ì´ëª¨ì§€ ì œê±° | PageMapping.jsx |
| 2025-11-13 | í•„í„°ë§ ë²„ê·¸ ìˆ˜ì • (ì„œë²„ ì‚¬ì´ë“œ) | mappings.js, PageMapping.jsx |
| 2025-11-13 | í˜ì´ì§€ë§¤í•‘ ë³µí•© ì¡°ê±´ êµ¬í˜„ | PageMapping.jsx, mappings.js |
| 2025-11-13 | í˜ì´ì§€ë§¤í•‘ ìˆ˜ë™ë“±ë¡ ë°°í¬ | ì„œë²„ ë°°í¬ ì™„ë£Œ |
| 2025-11-13 | URL ìˆ˜ë™ ì¶”ê°€ ê¸°ëŠ¥ êµ¬í˜„ | PageMapping.jsx, mappings.js |
| 2025-11-13 | ë“±ë¡ìœ í˜• ì»¬ëŸ¼ ì¶”ê°€ | PageMapping.jsx, add_source_type.sql |
| 2025-11-13 | ë§¤í•‘ìƒíƒœ í•„í„° ë“œë¡­ë‹¤ìš´ ì¶”ê°€ | PageMapping.jsx |
| 2025-11-13 | URLâ†’ë² ì´ìŠ¤URL ì»¬ëŸ¼ëª… ë³€ê²½ | PageMapping.jsx |
| 2025-11-13 | ë§¤í•‘ ìƒíƒœ ë°°ì§€ ì¶”ê°€ | PageMapping.jsx |
| 2025-11-13 | nodemon ìë™ì¬ì‹œì‘ ì ìš© | package.json |
| 2025-11-13 | ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì œê±° ì„¤ì • | urlCleaner.js |
| 2025-11-13 | ìœ ì…URL ë³´ê¸° ê¸°ëŠ¥ ì¶”ê°€ | PageMapping.jsx |
| 2025-11-13 | ì œí’ˆ ë°°ì§€ ì‹œìŠ¤í…œ êµ¬í˜„ | OrderAnalysis.jsx |
| 2025-11-13 | êµ¬ë§¤ì™„ë£Œ ìƒ‰ìƒ ì¡°ê±´ ì œê±° | OrderAnalysis.jsx |
| 2025-11-13 | ìƒì„¸í˜ì´ì§€ ì¹´ë“œ êµ¬ì¡° ê°œí¸ | OrderAnalysis.jsx |
| 2025-11-13 | ìƒí’ˆëª… ìƒ‰ìƒ ì¡°ê±´ ì œê±° | OrderAnalysis.jsx |
| 2025-11-13 | ë°©ë¬¸â†’ìœ í˜• ë¼ë²¨ ë³€ê²½ | OrderAnalysis.jsx |
| 2025-11-12 | 1ì´ˆ ë¯¸ë§Œ ì²´ë¥˜ ë°°ì§€ ì¶”ê°€ | OrderAnalysis.jsx |
| 2025-11-10 | ì—°ì† ì¤‘ë³µ í˜ì´ì§€ ì œê±° ë¡œì§ êµ¬í˜„ | OrderAnalysis.jsx |
| 2025-11-10 | Cursor Rules 6ê°œë¡œ ì •ë¦¬ (í† í° 50% ì ˆì•½) | .cursor/rules/ |
| 2025-11-10 | ë¡œì»¬-ì„œë²„ DB ì§ì ‘ ì—°ê²° êµ¬ì¶• | server.js, vite.config.js |
| 2025-11-07 | ê´‘ê³  ì†Œì¬ ì»¬ëŸ¼ëª… ì§ê´€í™” | CreativePerformance.jsx |
| 2025-11-06 | ì²´ë¥˜ì‹œê°„ 10ë¶„ ìƒí•œ ì„¤ì • | stats.js, OrderAnalysis.jsx |
| 2025-11-06 | í˜ì´ì§€ ê²½ë¡œ ë¶„ë¦¬ (êµ¬ë§¤ë‹¹ì¼/ê³¼ê±°) | stats.js, OrderAnalysis.jsx |
| 2025-11-06 | ê³ ê° ì—¬ì • ìƒë‹¨ UI/UX ê°œì„  | OrderAnalysis.jsx |
| 2025-11-06 | í˜ì´ì§€ ë§¤í•‘ ê²€ìƒ‰ ê¸°ëŠ¥ ê°œì„  | mappings.js, PageMapping.jsx |
| 2025-11-05 | Direct ë°©ë¬¸ ê³ ê° ì•ˆë‚´ ì¶”ê°€ | OrderAnalysis.jsx |
| 2025-11-05 | UTM ë°ì´í„° ì¼ê´€ì„± í™•ë³´ | stats.js |
| 2025-11-05 | ê³ ê° ì—¬ì • ëª¨ë‹¬ UTM íˆìŠ¤í† ë¦¬ ê°œì„  | stats.js, OrderAnalysis.jsx |
| 2025-11-05 | Cafe24 API ì—°ë™ ì œê±° | cafe24.js ë“± 3ê°œ íŒŒì¼ ì‚­ì œ |
| 2025-10-31 | tracker-v042.js ë°°í¬ | tracker-v042.js |
| 2025-10-28 | HTTPS SSL ì¸ì¦ì„œ ë°œê¸‰ ì™„ë£Œ | nginx, certbot |

---

## âš ï¸ ì•Œë ¤ì§„ ì´ìŠˆ

### 1. ì™¸ë¶€ ê²°ì œ ì¶”ì  ë¶ˆê°€ âŒ
- **ë¬¸ì œ**: ì¹´ì¹´ì˜¤í˜ì´, ë„¤ì´ë²„í˜ì´ ì£¼ë¬¸ì´ conversions í…Œì´ë¸”ì— ê¸°ë¡ ì•ˆ ë¨
- **ì›ì¸**: ì™¸ë¶€ ê²°ì œ í˜ì´ì§€ì—ì„œ purchase ì´ë²¤íŠ¸ ë¯¸ë°œìƒ
- **ì˜í–¥**: ì™¸ë¶€ ê²°ì œ ì£¼ë¬¸ì˜ ê´‘ê³  íš¨ê³¼ ì¸¡ì • ë¶ˆê°€
- **ìƒíƒœ**: ì¼ë°˜ ê²°ì œë§Œ ì¶”ì  ì¤‘

### 2. Cafe24 API ì—°ë™ ì œê±°ë¨ (2025-11-05)
- **ì´ìœ **: visitor_id ì¶”ì¶œ ë¶ˆê°€ëŠ¥í•˜ì—¬ ì‹¤ì§ˆì  íš¨ìš© ì—†ìŒ
- **ì˜í–¥**: ì—†ìŒ (ê¸°ì¡´ì—ë„ ë°ì´í„° ìˆ˜ì§‘ ëª» í–ˆìŒ)

---

## ğŸ› ï¸ ê°œë°œ í™˜ê²½ (macOS)

### 1ï¸âƒ£ ìµœì´ˆ ì„¤ì • (í•œ ë²ˆë§Œ)

#### Supabase í”„ë¡œì íŠ¸ ìƒì„±
1. https://supabase.com ì ‘ì† ë° íšŒì›ê°€ì…
2. ìƒˆ í”„ë¡œì íŠ¸ ìƒì„± (ë¬´ë£Œ í”Œëœ ê°€ëŠ¥)
3. Settings > Databaseì—ì„œ ì—°ê²° ì •ë³´ í™•ì¸
4. SQL Editorì—ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰:
   - `backend/migrations/init.sql`
   - `backend/migrations/create_url_mappings.sql`
   - `backend/migrations/add_excluded_flag.sql`
   - `backend/migrations/add_source_type.sql`
   - `backend/migrations/add_url_conditions.sql`
   - `backend/migrations/add_utm_sessions.sql`
   - `backend/migrations/add_payment_details.sql`
   - `backend/migrations/add_ip_tracking.sql`
   - `backend/migrations/create_ad_spend_simple.sql`
   - `backend/migrations/add_order_status.sql`
   - `backend/migrations/add_cafe24_token.sql`
   - `backend/migrations/add_dynamic_utm_params.sql`

#### í™˜ê²½ íŒŒì¼ ìƒì„±
`backend/.env.local` íŒŒì¼ ìƒì„± (Supabase ì—°ê²° ì •ë³´):
```bash
DB_HOST=db.xxxxxxxxxxxxx.supabase.co
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=[Supabaseì—ì„œ ë°›ì€ ë¹„ë°€ë²ˆí˜¸]
DB_NAME=postgres
```

### 2ï¸âƒ£ ë¡œì»¬ ê°œë°œ ì‹¤í–‰

#### ë°©ë²• A: Docker ì‚¬ìš© (ì¶”ì²œ)
```bash
# 1. Dockerë¡œ ì „ì²´ ì‹¤í–‰
docker-compose up -d

# ì ‘ì†: http://localhost:3030
```

#### ë°©ë²• B: ì§ì ‘ ì‹¤í–‰
```bash
# í„°ë¯¸ë„ 1: ë°±ì—”ë“œ
cd backend
npm install
node src/server.js

# í„°ë¯¸ë„ 2: í”„ë¡ íŠ¸ì—”ë“œ
cd frontend
npm install
npm run dev

# ì ‘ì†: http://localhost:3030
```

### 3ï¸âƒ£ Vercel ë°°í¬

#### ìµœì´ˆ ë°°í¬ ì„¤ì •
```bash
# 1. Vercel CLI ì„¤ì¹˜
npm install -g vercel

# 2. ë¡œê·¸ì¸
vercel login

# 3. í”„ë¡œì íŠ¸ ì—°ê²°
vercel link

# 4. í™˜ê²½ë³€ìˆ˜ ì„¤ì • (Vercel Dashboard)
# - DB_HOST, DB_PORT, DB_USER, DB_PASSWORD, DB_NAME
# - Supabase ì—°ê²° ì •ë³´ ì…ë ¥

# 5. ë°°í¬
vercel --prod
```

#### ì´í›„ ë°°í¬
```bash
# 1. ë¡œì»¬ ì»¤ë°‹ & Push
git add .
git commit -m "ë©”ì‹œì§€"
git push origin main

# 2. Vercel ìë™ ë°°í¬ (GitHub ì—°ë™ ì‹œ)
# ë˜ëŠ” ìˆ˜ë™ ë°°í¬:
vercel --prod
```

---

## ğŸ”„ í•µì‹¬ ì‹œìŠ¤í…œ ì •ë³´

### ì •ìƒ ì‘ë™ ê¸°ëŠ¥
- âœ… tracker-v042.js (ì¼ë°˜ ê²°ì œ ì¶”ì )
- âœ… UTM ê¸°ë°˜ ê´‘ê³  íš¨ê³¼ ì¸¡ì •
- âœ… ê³ ê° ì—¬ì • ë¶„ì„ (êµ¬ë§¤ë‹¹ì¼/ê³¼ê±° ë¶„ë¦¬)
- âœ… ì²´ë¥˜ì‹œê°„ ìë™ í•„í„°ë§ (10ë¶„ ìƒí•œ)

### ë°ì´í„° íë¦„
```
ê³ ê° ë°©ë¬¸ (UTM í¬í•¨) â†’ tracker-v042.js â†’ pageview ê¸°ë¡
â†’ ìƒí’ˆ êµ¬ë§¤ (ì¼ë°˜ ê²°ì œë§Œ) â†’ purchase ì´ë²¤íŠ¸
â†’ conversions í…Œì´ë¸” ì €ì¥ â†’ ëŒ€ì‹œë³´ë“œ ì¡°íšŒ
```

### ì£¼ìš” íŒŒì¼
- Tracker: `tracker/build/tracker-v042.js`
- Backend: `backend/src/server.js`, `backend/src/routes/stats.js`
- Frontend: `frontend/src/pages/OrderAnalysis.jsx`
- DB: Supabase PostgreSQL (ì—°ê²° ì •ë³´ëŠ” .env.local ì°¸ì¡°)

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- [START_GUIDE.md](./START_GUIDE.md) - ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ
- [deployment/DEPLOY_GUIDE.md](./deployment/DEPLOY_GUIDE.md) - ë°°í¬ ê°€ì´ë“œ
- [Git ì €ì¥ì†Œ](https://github.com/hongkimwork/moadamda-analytics)

---

**ğŸ’¡ Note**: ì´ ë¬¸ì„œëŠ” ìµœê·¼ ì‘ì—… ë¡œê·¸ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ê°„ê²°í•˜ê²Œ ê´€ë¦¬ë©ë‹ˆë‹¤.
